(function(spj, $, undefined) {
	function spamReg(url, image) {
		var days = document.getElementsByName("sfdays");
		var visit = document.getElementsByName("sfvisit");
		var max = document.getElementsByName("maxusers");
		var url = url + '&days=' + days[0].value + '&max=' + max[0].value + '&visit=' + visit[0].checked;
		document.getElementById('spam-reg').innerHTML = '<img src="' + image + '" />';
		$('#spam-reg').load(url);
	}

	/***********************************************
	event handlers
	***********************************************/

	sp_spam_show_reg = {
		init : function() {
			$('.spSpamRegShow').click( function() {
				var mydata = $(this).data();
				spamReg(mydata.url, mydata.img);
			});
		}
	};

	sp_spam_cancel = {
		init : function() {
			$('.spSpamCancel').click( function() {
				var mydata = $(this).data();
				$(mydata.target).html('');
			});
		}
	};

	/***********************************************
	load the event handlers up on document ready
	***********************************************/

	$(document).ready(function() {
		$('#sfmaincontainer').on('adminformloaded', function() {
			sp_spam_show_reg.init();
			sp_spam_cancel.init();
		});
	});
}(window.spj = window.spj || {}, jQuery));
